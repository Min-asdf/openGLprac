#include <GL/freeglut.h>

//육면체 정점의 좌표
GLfloat MyVertices[8][3] = { {-0.25, -0.25, 0.25}, {-0.25, 0.25, 0.25},
	{0.25, 0.25, 0.25},{0.25, -0.25, 0.25}, {-0.25, -0.25, -0.25},
	{-0.25, 0.25, -0.25}, {0.25, 0.25, -0.25}, {0.25, -0.25, -0.25} };
//육면체 정점의 색
GLfloat MyColors[8][3] = { {0.2, 0.2, 0.2}, {1.0, 0.0, 0.0},
	{1.0, 1.0, 0.0}, {0.0, 1.0, 0.0}, {0.0, 0.0, 1.0},
	{1.0, 0.0, 1.0}, {1.0, 1.0, 1.0}, {0.0, 1.0, 1.0} };
//육면체 정점 리스트
GLubyte MyVertexList[24] = { 0,3,2,1, 2,3,7,6, 0,4,7,3, 1,2,6,5, 4,5,6,7, 0,1,5,4 };

//함수 선언
void MyDisplay();

int main(int argc, char** argv) {
	//윈도우 함수
	glutInit(&argc, argv);
	//Depth buffer 사용 명시
	glutInitDisplayMode(GLUT_RGB | GLUT_DEPTH);
	glutInitWindowSize(300, 300);
	glutInitWindowPosition(0, 0);
	glutCreateWindow("OpenGL Drawing Example");
	glClearColor(1.0, 1.0, 1.0, 1.0);
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0);

	//콜백 함수 등록
	glutDisplayFunc(MyDisplay);

	//이벤트 루프 진입
	glutMainLoop();

	return 0;
}

//MyDisplay 콜백 함수
void MyDisplay() {
	//Depth buffer 활성화 및 테스트
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
	glEnable(GL_DEPTH_TEST);

	glFrontFace(GL_CCW);
	glEnableClientState(GL_COLOR_ARRAY);
	glEnableClientState(GL_VERTEX_ARRAY);
	glColorPointer(3, GL_FLOAT, 0, MyColors);
	glVertexPointer(3, GL_FLOAT, 0, MyVertices);
	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
	glRotatef(30.0, 1.0, 1.0, 1.0);
	for (GLint i = 0; i < 6; i++) {
		glDrawElements(GL_POLYGON, 4, GL_UNSIGNED_BYTE, &MyVertexList[4 * i]);
	}

	glFlush();
}
